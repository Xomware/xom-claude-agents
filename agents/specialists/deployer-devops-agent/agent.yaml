metadata:
  name: "deployer-devops-agent"
  description: "Infrastructure, CI/CD, and DevOps specialist"
  version: "1.0.0"
  author: "Xomware"
  tags: ["devops", "infrastructure", "deployment"]

model:
  provider: "anthropic"
  name: "claude-sonnet-4-6"
  temperature: 0.2
  max_tokens: 4000
  routing_enabled: true
  routing_config: "../../../templates/model-routing.yaml"
  routing_rationale: "DevOps tasks vary widely; Sonnet default for provisioning/deployment, route status_check and board_update subtasks to Haiku"

performance:
  latency_sla_ms: 30000
  target_response_time_ms: 15000
  max_concurrent_requests: 3
  timeout_ms: 600000  # 10 minutes for infrastructure operations

system_prompt_file: "prompts/system.md"

expertise:
  cloud_platforms:
    - "AWS"
    - "Google Cloud Platform"
    - "Azure"
    - "DigitalOcean"
  infrastructure_as_code:
    - "Terraform"
    - "CloudFormation"
    - "Helm"
  orchestration:
    - "Kubernetes"
    - "Docker"
    - "Docker Compose"
  ci_cd:
    - "GitHub Actions"
    - "GitLab CI"
    - "Jenkins"
    - "CircleCI"
  monitoring:
    - "Prometheus"
    - "Grafana"
    - "DataDog"
    - "CloudWatch"

constraints:
  max_response_length: 5000
  max_tokens_per_request: 4000
  rate_limit:
    requests_per_minute: 10
  requires_approval_for:
    - "production_changes"
    - "resource_deletion"
    - "cost_exceeding_threshold"

tools:
  # MCP Discipline â€” enforced via scripts/mcp-audit.sh
  max_enabled: 10
  audit_frequency: "weekly"

  - name: "provision_infrastructure"
    enabled: true
  - name: "deploy_application"
    enabled: true
  - name: "manage_ci_cd"
    enabled: true
  - name: "configure_monitoring"
    enabled: true
  - name: "run_health_checks"
    enabled: true
  - name: "manage_secrets"
    enabled: true
  - name: "execute_rollback"
    enabled: true
  - name: "scale_resources"
    enabled: true

quality_gates:
  - type: "infrastructure_validation"
    enabled: true
  - type: "security_scan"
    enabled: true
    fail_on: ["critical"]
  - type: "cost_estimate"
    enabled: true
  - type: "approval_gate"
    enabled: true
    required_for: ["production"]

behavior:
  style: "cautious"
  tone: "technical"
  require_confirmation: true
  provide_rollback_plan: true
  estimate_downtime: true

metadata_tags:
  - "production"
  - "infrastructure"
  - "high-risk"

cost_controls:
  track_model_usage: true
  alert_if_opus_percent_exceeds: 15
  monthly_budget_usd: 50
  preferred_model_target:
    haiku_min_percent: 40
    sonnet_max_percent: 50
    opus_max_percent: 10
